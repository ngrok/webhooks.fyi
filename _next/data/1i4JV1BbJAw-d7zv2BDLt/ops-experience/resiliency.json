{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Webhook listeners — like any other piece of software — will eventually become unstable or unavailable due to network or system issues. Some webhook providers — such as ",{"$$mdtype":"Tag","name":"a","attributes":{"href":"https://help.bolt.com/developers/guides/webhooks/webhook-failure-notifications/"},"children":["Bolt"]},", ",{"$$mdtype":"Tag","name":"a","attributes":{"href":"https://www.aftership.com/docs/aftership/webhook/webhook-overview#retry-webhooks"},"children":["Aftership"]},", ",{"$$mdtype":"Tag","name":"a","attributes":{"href":"https://confluence.atlassian.com/bitbucketserver/manage-webhooks-938025878.html#Managewebhooks-Circuitbreaking"},"children":["BitBucket"]},", and ",{"$$mdtype":"Tag","name":"a","attributes":{"href":"https://developer.squareup.com/docs/webhooks/overview#notification-retries"},"children":["Square"]}," — recognize ",{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["availability as an inevitable problem"]}," and provide resiliency features to reduce the burden on webhook consumers. Examples of interesting features include:"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["Heartbeat checks"]},": Webhook providers regularly reach out to webhook listeners to check their status. If a listener is unavailable, the provider takes action — such as queueing notifications or sending alerts to system admins — until the webhook listener gets fixed. This feature is helpful, especially in webhooks that don't send messages often."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"js"},"children":["app.post('/webhook', (req, res) => {\n  if (!req.rawBody) {\n    // empty value = heartbeat check. Return 200 or 204 - No Content\n    res.status(204).send()\n  }else{\n    ...\n"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["Queueing"]},": webhook providers can keep track of historical information of webhook events sent and allow consumers to send messages again after failures or unavailability. Queues can be implemented on listener errors or in conjunction with heartbeat checks."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"img","attributes":{"src":"/img/webhook_failure.png","alt":"Webhook Events and retry mechanism"},"children":[]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["Circuit Breaking"]},": Some webhook providers implement circuit breaking logic to throttle and alleviate requests to webhook listeners when webhook requests cross an error or response time threshold."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"img","attributes":{"src":"/img/circuit_breaking.png","alt":"Webhook Circuit breaking"},"children":[]}]}]}]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["These features help consumers keep their service resilient and recover from issues faster and without message loss."]}],"frontmatter":{"title":"Heartbeat, Queueing, and Circuit Breaking","description":"Webhook listeners — like any other piece of software — will eventually become unstable or unavailable due to network or system issues. Good webhook providers recognize availability as an inevitable problem and provide resiliency features to reduce the burden on webhook consumers."},"file":{"path":"/ops-experience/resiliency.md"}}},"__N_SSG":true}